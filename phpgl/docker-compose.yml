version: '2.1'
services:
  apache2-phpgl:
    image: mchauvel/php-pdo-mysql
    ports:
      - "8083:80"
    volumes:
      - ${APPDATA_PATH}/phpgl/apache2/html:/var/www/html
      - ${APPDATA_PATH}/phpgl/apache2/php.ini:/etc/php5/apache2/php.ini
      - ${APPDATA_PATH}/phpgl/apache2/php5/cli/php.ini:/etc/php5/cli/php.ini
      - ${APPDATA_PATH}/phpgl/apache2/apache_logs:/var/log/apache2
    links:
      - mysql-phpgl
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
    restart: always
    container_name: apache2-phpgl
    depends_on:
      - mysql-phpgl

  mysql-phpgl:
    image: mysql:5.5
    expose:
      - "3306"
    ports:
      - "3306:3306"  
    volumes:
      - ${APPDATA_PATH}/phpgl/mysql/config:/etc/mysql
      - ${APPDATA_PATH}/phpgl/mysql/mysql_logs:/var/log
      - ${APPDATA_PATH}/phpgl/mysql/data:/var/lib/mysql
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
    restart: always
    container_name: mysql-phpgl

  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    links:
      - mysql-phpgl
    ports:
      - "9001:80"
    environment:
      PMA_HOSTS: mysql-phpgl
    restart: always
    depends_on:
      - mysql-phpgl
    container_name: phpmyadmin
